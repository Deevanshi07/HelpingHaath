<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Form</title>
    <link rel="stylesheet" href="frame20.css">
    <style>
        .required {
            content: "*";
            color: red;
            margin-left: 5px;
        }
    </style>
</head>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<!-- 
<input id="donationAmount" type="number" placeholder="Amount (INR)" required>
<input id="donorEmail" type="email" placeholder="Your email" required>
<button id="donateBtn">Donate</button> 

<script src="app.js"></script>
</body>

<body>
    <header>
        <div class="logo-container">
            <img src="images/logo.png" alt="logo">
        </div>
    </header>
    <div class="container">
        <div class="form-box">
            <h2>Payment Details</h2>
            <form>
                <div class="form-group">
                    <label for="name">Name<span class="required">*</span></label>
                    <input type="text" id="name" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="phone">Phone<span class="required">*</span></label>
                    <input type="text" id="phone" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label for="email">Email<span class="required">*</span></label>
                    <input type="email" id="email" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="amount">Amount<span class="required">*</span></label>
                    <input type="text" id="amount" placeholder="₹ Enter Amount">
                </div>
                <div class="form-group">
                    <label for="support">Words of Support</label>
                    <textarea style="width: 100%; height: 96px;" id="support" placeholder="Please donate to share words of support.."></textarea>
                </div>

                <div class="payNow">
                    <div class="payment-icons">
                        <img src="images/frame20_payment_modes.png" alt="Payment Methods">
                    </div>
                    <button type="submit" class="pay-btn">Pay Now</button>
                </div>
                
            </form>
            
        </div>
    </div>
</body>
</html> -->











<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payment Form</title>
  <link rel="stylesheet" href="frame20.css" />
  <style>
    .required {
      color: red;
      margin-left: 5px;
    }
  </style>
  <!-- Razorpay Checkout Script -->
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>

<body>
  <header>
    <div class="logo-container">
      <img src="images/logo.png" alt="logo">
    </div>
  </header>

  <div class="container">
    <div class="form-box">
      <h2>Payment Details</h2>

      <form id="donationForm">
        <div class="form-group">
          <label for="name">Name<span class="required">*</span></label>
          <input type="text" id="name" placeholder="Enter your name" required />
        </div>

        <div class="form-group">
          <label for="phone">Phone<span class="required">*</span></label>
          <input type="text" id="phone" placeholder="Enter your phone number" required />
        </div>

        <div class="form-group">
          <label for="email">Email<span class="required">*</span></label>
          <input type="email" id="email" placeholder="Enter your email" required />
        </div>

        <div class="form-group">
          <label for="amount">Amount<span class="required">*</span></label>
          <input type="number" id="amount" placeholder="₹ Enter Amount" required />
        </div>

        <div class="form-group">
          <label for="support">Words of Support</label>
          <textarea
            style="width: 100%; height: 96px;"
            id="support"
            placeholder="Please share words of support..."
          ></textarea>
        </div>

        <div class="payNow">
          <div class="payment-icons">
            <img src="images/frame20_payment_modes.png" alt="Payment Methods" />
          </div>
          <button type="submit" class="pay-btn">Pay Now</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const form = document.getElementById("donationForm");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const amount = document.getElementById("amount").value.trim();

      if (!name || !email || !phone || !amount) {
        alert("Please fill in all required fields.");
        return;
      }

      try {
        // Step 1: Create order on backend (or directly use amount if placeholder)
        const res = await fetch("http://localhost:3000/api/donate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ amount, userEmail: email })
        });

        const data = await res.json();
        if (!data.ok) throw new Error(data.error || "Failed to create donation");

        // Step 2: Open Razorpay checkout
        const options = {
          key: "YOUR_RAZORPAY_KEY_ID", // replace with your key
          amount: amount * 100, // Razorpay works in paise
          currency: "INR",
          name: "HelpingHaath",
          description: "Donation",
          handler: function (response) {
            alert("Payment successful! Payment ID: " + response.razorpay_payment_id);
          },
          prefill: { name, email, contact: phone },
          theme: { color: "#3399cc" },
        };

        const rzp = new Razorpay(options);
        rzp.open();

      } catch (err) {
        console.error("Payment Error:", err);
        alert("Error: " + err.message);
      }
    });
  </script>

  <script src="app.js"></script>
</body>
</html>
